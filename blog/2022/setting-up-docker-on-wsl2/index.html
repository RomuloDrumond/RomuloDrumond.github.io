<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Setting up Docker on WSL2 | Romulo Drumond</title> <meta name="author" content="Romulo B. P. Drumond"/> <meta name="description" content="Quick tutorial to ease up using Docker on WSL without Docker Desktop"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/favicon-32x32.png"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://romulodrumond.com/blog/2022/setting-up-docker-on-wsl2/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Romulo Drumond</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Setting up Docker on WSL2</h1> <p class="post-meta">August 29, 2022</p> <p class="post-tags"> <a href="/blog/2022"> <i class="fas fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/wsl"> <i class="fas fa-hashtag fa-sm"></i> WSL</a>   </p> </header> <article class="post-content"> <ul> <li><a href="#1-a-bit-of-context">1. A bit of context</a></li> <li><a href="#2-setting-up-docker-on-wsl2">2. Setting up Docker on WSL2</a></li> <li><a href="#3-bonus">3. Bonus</a></li> </ul> <h1 id="1-a-bit-of-context">1. A bit of context</h1> <p>So, it has been a journey to use a Windows 11 machine again and leave Linux behind (used mostly Ubuntu in my dev/machine learning experience). Although in the beginning, the Windows Subsystem for Linux (WSL) had many problems, today it is in a useable state (all the engineering team I work on uses Windows with WSL and we all develop in “Linux”). If you don’t know the tool or maybe dismissed it in the past I advise you to give it a try, just go to the <a href="https://docs.microsoft.com/en-us/windows/wsl/about" target="_blank" rel="noopener noreferrer">Microsoft docs</a>. PS: Today you can even lunch Linux applications that have UI (<a href="https://docs.microsoft.com/en-us/windows/wsl/tutorials/gui-apps" target="_blank" rel="noopener noreferrer">link</a>).</p> <div style="position:relative;padding-bottom:56.25%;"> <iframe style="width:100%;height:100%;position:absolute;left:0px;top:0px;" width="100%" height="100%" src="https://www.youtube.com/embed/MrZolfGm8Zk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> </div> <p style="text-align:center; margin-top:0.15cm;"> Video 1: A good intro to the capabilities of WSL2 with VSCode. </p> <p>In the development world, using containers (see Video 2) is usually the go-to standard for delivering applications, not just that but when deploying and training machine learning models too as we can use container images to spin up Spark clusters (see Video 3) and Dask clusters (see Video 4). With that in mind, a famous engine used for containers is <a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker</a>, which we can use to build and run container images and test our applications. With that in mind, for a development environment to work properly on WSL we need an engine, and we will be using Docker for it.</p> <div style="position:relative;padding-bottom:56.25%;"> <iframe style="width:100%;height:100%;position:absolute;left:0px;top:0px;" width="100%" height="100%" src="https://www.youtube.com/embed/0qotVMX-J5s" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> </div> <p style="text-align:center; margin-top:0.15cm;"> Video 2: Containerization Explained. </p> <div style="position:relative;padding-bottom:56.25%;"> <iframe style="width:100%;height:100%;position:absolute;left:0px;top:0px;" width="100%" height="100%" src="https://www.youtube.com/embed/ymtq8yjmD9I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> </div> <p style="text-align:center; margin-top:0.15cm;"> Video 3: A good intro to Spark. </p> <div style="position:relative;padding-bottom:56.25%;"> <iframe style="width:100%;height:100%;position:absolute;left:0px;top:0px;" width="100%" height="100%" src="https://www.youtube.com/embed/nnndxbr_Xq4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> </div> <p style="text-align:center; margin-top:0.15cm;"> Video 4: A good intro to Dask. </p> <h1 id="2-setting-up-docker-on-wsl2">2. Setting up Docker on WSL2</h1> <p>If you can/plan to use <a href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener noreferrer">Docker Desktop</a> on Windows to manage your containers, it is pretty straightforward, just follow this <a href="https://docs.docker.com/desktop/windows/wsl/" target="_blank" rel="noopener noreferrer">tutorial</a>. But, be aware that Docker Desktop is changing its <a href="https://docs.docker.com/subscription/#docker-desktop-license-agreement" target="_blank" rel="noopener noreferrer">license agreement</a> and you become paid for large organizations, although the docker engine will remain free.</p> <p>So, if you want to remain using docker for free you can install the Docker engine and Docker compose as you would in a Linux machine (links below).</p> <p><a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">How to install Docker Engine/CLI</a></p> <p><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">How To install docker-compose</a></p> <p>The problem of WSL will appear while trying to run a docker image. You would get an error like that:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run hello-world 
docker: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?. See <span class="s1">'docker run --help'</span><span class="nb">.</span>
</code></pre></div></div> <p>For docker to properly work on WSL you will need to start the service with:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>service docker start
</code></pre></div></div> <p>Then docker should work fine. But it would suck for every time WSL restarts you need to run the sudo command. What can you do? You can update the <code class="language-plaintext highlighter-rouge">/etc/wsl.conf</code> file on your Linux distribution to run the boring command at startup. As an example:</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># /etc/wsl.conf
</span>[<span class="n">boot</span>]
<span class="n">command</span>=<span class="s2">"service docker start"</span>
</code></pre></div></div> <p>That’s it! Docker will be ready to run every time you start WSL.</p> <h1 id="3-bonus">3. Bonus</h1> <p>You can add more commands to start services at WSL startup, as an example, you could add cron:</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># /etc/wsl.conf
</span>[<span class="n">boot</span>]
<span class="n">command</span>=<span class="s2">"service docker start; service cron start"</span>
</code></pre></div></div> <p>For more configuration options go to <a href="https://docs.microsoft.com/en-us/windows/wsl/wsl-config" target="_blank" rel="noopener noreferrer">Microsoft’s doc page</a>.</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Romulo B. P. Drumond. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>